<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† ÙÙˆØªØ³Ø§Ù„ ğŸ†</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Vazirmatn',sans-serif; background: #f4f6f8; }
.container { max-width: 1000px; margin: 20px auto; padding: 20px; background: #fff; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
h2 { text-align:center; margin-bottom:25px; color:#111; }
.table td, .table th { vertical-align: middle; }
.player-debt { font-weight: bold; }
.text-red { color:#d63384; }
.text-green { color:#198754; }
.btn-round { border-radius: 50px; }
.session-card { cursor:pointer; transition: all 0.3s; }
.session-card:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
.sessions-container { display:flex; gap:10px; overflow-x:auto; padding-bottom:10px; margin-bottom:20px; }
.session-card { flex-shrink:0; width:100px; height:90px; background:#333; color:#fff; border-radius:12px; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; }
@media (max-width:576px){
    .session-card { width:80px; height:70px; font-size:0.8rem; }
}
</style>
</head>
<body>

<div class="container">
<h2>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª ÙÙˆØªØ³Ø§Ù„ ğŸ†</h2>

<!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø­Ø¶ÙˆØ± -->
<div class="sessions-container">
  {% for monday in mondays %}
  <div class="session-card" onclick="location.href='{{ url_for('admin_attendance', date=monday.strftime('%Y-%m-%d')) }}'">
    <div>{{ persian_number(monday.day) }}</div>
    <div>{{ PERSIAN_MONTHS[monday.month-1] }}</div>
    <div>{{ persian_number(monday.year) }}</div>
  </div>
  {% endfor %}
</div>

<!-- Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù† -->
<form method="POST" action="{{ url_for('admin_players') }}" class="row g-2 mb-4">
  <input type="hidden" name="action" value="add">
  <div class="col-md-5">
    <input type="text" class="form-control" name="name" placeholder="Ù†Ø§Ù… Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¬Ø¯ÛŒØ¯" required>
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-success btn-round w-100">â• Ø§ÙØ²ÙˆØ¯Ù†</button>
  </div>
</form>

<!-- Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù† -->
<table class="table table-hover text-center align-middle">
<thead class="table-light">
<tr>
  <th>Ø±Ø¯ÛŒÙ</th>
  <th>Ù†Ø§Ù… Ø¨Ø§Ø²ÛŒÚ©Ù†</th>
  <th>Ø¨Ø¯Ù‡ÛŒ (ØªÙˆÙ…Ø§Ù†)</th>
  <th>ØªØ³ÙˆÛŒÙ‡</th>
  <th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody>
{% for player in players %}
<tr>
<td>{{ loop.index }}</td>
<td>{{ player.name }}</td>
<td>{% if player.debt>0 %}<span class="player-debt text-red">{{ persian_number(player.debt) }}</span>{% else %}<span class="text-green">ØªØ³ÙˆÛŒÙ‡</span>{% endif %}</td>
<td>
<form method="POST" action="{{ url_for('admin_players') }}" class="d-flex gap-1 justify-content-center">
  <input type="hidden" name="action" value="pay">
  <input type="hidden" name="player_id" value="{{ player.id }}">
  <input type="number" class="form-control form-control-sm" name="amount" placeholder="Ù…Ø¨Ù„Øº" min="0" required style="width:80px;">
  <button type="submit" class="btn btn-primary btn-sm btn-round">ğŸ’¸ Ù¾Ø±Ø¯Ø§Ø®Øª</button>
</form>
</td>
<td>
<form method="POST" action="{{ url_for('admin_players') }}" class="d-flex justify-content-center">
  <input type="hidden" name="action" value="delete">
  <input type="hidden" name="player_id" value="{{ player.id }}">
  <button type="submit" class="btn btn-danger btn-sm btn-round">ğŸ—‘ Ø­Ø°Ù</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>

<div class="text-center mt-3">
  <a href="{{ url_for('logout') }}" class="btn btn-outline-secondary btn-round">ğŸšª Ø®Ø±ÙˆØ¬</a>
</div>
</div>

</body>
</html>
